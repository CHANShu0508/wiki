<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HAL库函数 | Wiki：知识&amp;笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/header32.png">
    <meta name="description" content="不再碎片化 | No longer fragmented">
    <meta name="keywords" content="个人技术博客,技术文档,学习,git,github,markdown,嵌入式,STM32,C语言">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.57c10a4d.css" as="style"><link rel="preload" href="/assets/js/app.287ba006.js" as="script"><link rel="preload" href="/assets/js/2.cf4362eb.js" as="script"><link rel="preload" href="/assets/js/48.afbe4f62.js" as="script"><link rel="prefetch" href="/assets/js/10.ca3f9f94.js"><link rel="prefetch" href="/assets/js/11.b4d1c50f.js"><link rel="prefetch" href="/assets/js/12.cca3ba79.js"><link rel="prefetch" href="/assets/js/13.e1d72f62.js"><link rel="prefetch" href="/assets/js/14.91f2adb6.js"><link rel="prefetch" href="/assets/js/15.a7a70068.js"><link rel="prefetch" href="/assets/js/16.d5be4432.js"><link rel="prefetch" href="/assets/js/17.31ec0952.js"><link rel="prefetch" href="/assets/js/18.8c0f4835.js"><link rel="prefetch" href="/assets/js/19.7cbc9836.js"><link rel="prefetch" href="/assets/js/20.e1ca69ed.js"><link rel="prefetch" href="/assets/js/21.b3b61477.js"><link rel="prefetch" href="/assets/js/22.03aa72ee.js"><link rel="prefetch" href="/assets/js/23.564ba096.js"><link rel="prefetch" href="/assets/js/24.cf195300.js"><link rel="prefetch" href="/assets/js/25.0d959a77.js"><link rel="prefetch" href="/assets/js/26.8f179dd3.js"><link rel="prefetch" href="/assets/js/27.9d4841cf.js"><link rel="prefetch" href="/assets/js/28.5c175096.js"><link rel="prefetch" href="/assets/js/29.2cb763ad.js"><link rel="prefetch" href="/assets/js/3.92b0bd34.js"><link rel="prefetch" href="/assets/js/30.eaf25d81.js"><link rel="prefetch" href="/assets/js/31.7f3c2787.js"><link rel="prefetch" href="/assets/js/32.abd8deb1.js"><link rel="prefetch" href="/assets/js/33.6c0ca3cd.js"><link rel="prefetch" href="/assets/js/34.2357e103.js"><link rel="prefetch" href="/assets/js/35.bedfc4ca.js"><link rel="prefetch" href="/assets/js/36.1fe9624d.js"><link rel="prefetch" href="/assets/js/37.6c24fb08.js"><link rel="prefetch" href="/assets/js/38.f00e5f04.js"><link rel="prefetch" href="/assets/js/39.5064abfe.js"><link rel="prefetch" href="/assets/js/4.9907f1e1.js"><link rel="prefetch" href="/assets/js/40.a7bfeb29.js"><link rel="prefetch" href="/assets/js/41.8cb7036a.js"><link rel="prefetch" href="/assets/js/42.b5ed0c1b.js"><link rel="prefetch" href="/assets/js/43.29bf753c.js"><link rel="prefetch" href="/assets/js/44.a2888a8b.js"><link rel="prefetch" href="/assets/js/45.26d4fffe.js"><link rel="prefetch" href="/assets/js/46.59abb034.js"><link rel="prefetch" href="/assets/js/47.910b85e1.js"><link rel="prefetch" href="/assets/js/49.a134584b.js"><link rel="prefetch" href="/assets/js/5.d0ed1372.js"><link rel="prefetch" href="/assets/js/50.3a7461e2.js"><link rel="prefetch" href="/assets/js/51.9575cb04.js"><link rel="prefetch" href="/assets/js/52.5fd5937b.js"><link rel="prefetch" href="/assets/js/53.d9b43790.js"><link rel="prefetch" href="/assets/js/54.4dd21ee3.js"><link rel="prefetch" href="/assets/js/55.6387d56f.js"><link rel="prefetch" href="/assets/js/56.05dd9dca.js"><link rel="prefetch" href="/assets/js/57.06ef5d9e.js"><link rel="prefetch" href="/assets/js/58.22dcffa8.js"><link rel="prefetch" href="/assets/js/59.f6f581db.js"><link rel="prefetch" href="/assets/js/6.e89ddaa7.js"><link rel="prefetch" href="/assets/js/60.608fdff0.js"><link rel="prefetch" href="/assets/js/61.ca910a34.js"><link rel="prefetch" href="/assets/js/62.40a51140.js"><link rel="prefetch" href="/assets/js/63.939ad5ab.js"><link rel="prefetch" href="/assets/js/64.fb28b271.js"><link rel="prefetch" href="/assets/js/65.4d6df1bd.js"><link rel="prefetch" href="/assets/js/66.0063edc7.js"><link rel="prefetch" href="/assets/js/67.bfd086a1.js"><link rel="prefetch" href="/assets/js/7.3cc1b487.js"><link rel="prefetch" href="/assets/js/8.3c2658fb.js"><link rel="prefetch" href="/assets/js/9.e346ca1c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57c10a4d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/head.png" alt="Wiki：知识&amp;笔记" class="logo"> <span class="site-name can-hide">Wiki：知识&amp;笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言学习" class="dropdown-title"><a href="/languages/" class="link-title">语言学习</a> <span class="title" style="display:none;">语言学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/basicknowledge/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>嵌入式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicknowledge/stm32/" class="nav-link">STM32</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/others/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/9a7ee40fc232253e/" class="nav-link">技术文档</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/chanshu0508/wikiBase" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言学习" class="dropdown-title"><a href="/languages/" class="link-title">语言学习</a> <span class="title" style="display:none;">语言学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/basicknowledge/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>嵌入式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicknowledge/stm32/" class="nav-link">STM32</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/others/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/9a7ee40fc232253e/" class="nav-link">技术文档</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/chanshu0508/wikiBase" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>底层&amp;寄存器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>HAL库外设</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/67ee08/" aria-current="page" class="active sidebar-link">HAL库函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal库" class="sidebar-link">HAL库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-delay" class="sidebar-link">HAL_Delay</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-gettick" class="sidebar-link">HAL_GetTick</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#gpio-操作" class="sidebar-link">GPIO 操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-gpio-writepin" class="sidebar-link">HALGPIOWritePin</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-gpio-togglepin" class="sidebar-link">HALGPIOTogglePin</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-gpio-readpin" class="sidebar-link">HALGPIOReadPin</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#定时器操作" class="sidebar-link">定时器操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-tim-irqhandler" class="sidebar-link">HALTIMIRQHandler</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-tim-base-start" class="sidebar-link">HALTIMBase_Start</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-tim-base-start-it" class="sidebar-link">HALTIMBaseStartIT</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-tim-setcompare" class="sidebar-link">_HALTIM_SetCompare</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-tim-prescaler" class="sidebar-link">_HALTIM_PRESCALER</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-tim-pwm-start" class="sidebar-link">HALTIMPWM_Start</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#adc-操作" class="sidebar-link">ADC 操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-adc-configchannel" class="sidebar-link">HALADCConfigChannel</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-adc-start" class="sidebar-link">HALADCStart</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-adc-pollforconversion" class="sidebar-link">HALADCPollForConversion</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-adc-getvalue" class="sidebar-link">HALADCGetValue</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#串口操作" class="sidebar-link">串口操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-uart-transmit" class="sidebar-link">HALUARTTransmit</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-uart-receive-it" class="sidebar-link">HALUARTReceive_IT</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-uart-enable-it" class="sidebar-link">_HALUARTENABLEIT</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-uart-get-flag" class="sidebar-link">_HALUARTGETFLAG</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-uart-clear-idleflag" class="sidebar-link">_HALUARTCLEARIDLEFLAG</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#中断返回函数" class="sidebar-link">中断返回函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-tim-periodelapsedcallback" class="sidebar-link">HALTIMPeriodElapsedCallback</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-gpio-exit-callback" class="sidebar-link">HALGPIOEXIT_Callback</a></li><li class="sidebar-sub-header"><a href="/pages/67ee08/#hal-uart-rxcpltcallback" class="sidebar-link">HALUARTRxCpltCallback</a></li></ul></li></ul></li><li><a href="/pages/86f153/" class="sidebar-link">HAL结构</a></li><li><a href="/pages/6e2aa6/" class="sidebar-link">GPIO各种点亮LED</a></li><li><a href="/pages/82e74c/" class="sidebar-link">定时器</a></li><li><a href="/pages/84525e/" class="sidebar-link">PWM控制LED颜色</a></li><li><a href="/pages/5b9d30/" class="sidebar-link">按键外部中断</a></li><li><a href="/pages/93c69a/" class="sidebar-link">ADC使用</a></li><li><a href="/pages/e32c04/" class="sidebar-link">串口与DMA</a></li><li><a href="/pages/bb595a/" class="sidebar-link">FLASH 读写</a></li><li><a href="/pages/7d18a8/" class="sidebar-link">IIC通信</a></li><li><a href="/pages/b48ce4/" class="sidebar-link">SPI 通信</a></li><li><a href="/pages/2edcc2/" class="sidebar-link">CAN</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><ul class="breadcrumbs" data-v-33863c7e><li data-v-33863c7e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-33863c7e></a></li> <li data-v-33863c7e><a href="/basicknowledge/stm32" title="STM32-目录页" data-v-33863c7e>STM32</a></li> <li data-v-33863c7e><a href="/basicknowledge/stm32/#HAL库外设" title="STM32#HAL库外设" data-v-33863c7e>HAL库外设</a></li> <!----></ul> <div class="info" data-v-33863c7e><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2020-08-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          HAL库函数
        </h1> <!----> <div class="theme-vdoing-content content__default"><p><strong>学习库函数最好的方法是看手册</strong></p> <h2 id="hal库"><a href="#hal库" class="header-anchor">#</a> HAL库</h2> <h3 id="hal-delay"><a href="#hal-delay" class="header-anchor">#</a> HAL_Delay</h3> <p>HAL 库提供了用于毫秒级延迟的函数：HAL_Delay 函数（使用<code>_weak</code> 修饰符说明该函数是可以用户重定义的）</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>__weak <span class="token keyword">void</span> <span class="token function">HAL_Delay</span><span class="token punctuation">(</span><span class="token class-name">uint32_t</span> Delay<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>函数名</th> <th>HAL_Delay</th></tr></thead> <tbody><tr><td>函数作用</td> <td>使系统延迟对应的毫秒级时间</td></tr> <tr><td>返回值</td> <td>void</td></tr> <tr><td>参数</td> <td>Delay，对应的延迟毫秒数，比如延迟 1 秒就为 1000</td></tr></tbody></table> <h3 id="hal-gettick"><a href="#hal-gettick" class="header-anchor">#</a> HAL_GetTick</h3> <p><code>uwTick</code>变量中存储的是从STM32的 Systick 初始化以来所经过的时间（ms），<code>uwTick</code>的存在相当于给整个程序提供了一个绝对的时间基准，访问其值可用如下函数：</p> <table><thead><tr><th>函数名</th> <th>HAL_GetTick</th></tr></thead> <tbody><tr><td>函数作用</td> <td>返回当前的<code>uwTick</code>值</td></tr> <tr><td>返回值</td> <td>当前的<code>uwTick</code>值</td></tr></tbody></table> <h2 id="gpio-操作"><a href="#gpio-操作" class="header-anchor">#</a> GPIO 操作</h2> <h3 id="hal-gpio-writepin"><a href="#hal-gpio-writepin" class="header-anchor">#</a> HAL_GPIO_WritePin</h3> <p>定义如下：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">HAL_GPIO_WritePin</span><span class="token punctuation">(</span>GPIO_TypeDef<span class="token operator">*</span> GPIOx<span class="token punctuation">,</span> <span class="token class-name">uint16_t</span> GPIO_Pin<span class="token punctuation">,</span> GPIO_PinState PinState<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th style="text-align:left;">HAL_GPIO_WritePin</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td style="text-align:left;">使得对应的引脚输出高电平或者低电平</td></tr> <tr><td style="text-align:left;">返回值</td> <td style="text-align:left;">void</td></tr> <tr><td style="text-align:left;">参数 1：GPIOx</td> <td style="text-align:left;">对应 GPIO 总线，其中 x 可以是 A…I。例如 PH10，则输入 GPIOH</td></tr> <tr><td style="text-align:left;">参数 2：GPIO_Pin</td> <td style="text-align:left;">对应引脚数，可以是 0-15。例如 PH10，则输入 GPIO_PIN_10</td></tr> <tr><td style="text-align:left;"><strong>参数 3：PinState</strong></td> <td style="text-align:left;"><code>GPIO_PIN_RESET</code>：输出低电平；<code>GPIO_PIN_SET</code>：输出高电平</td></tr></tbody></table> <h3 id="hal-gpio-togglepin"><a href="#hal-gpio-togglepin" class="header-anchor">#</a> HAL_GPIO_TogglePin</h3> <p>定义如下：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">HAL_GPIO_TogglePin</span><span class="token punctuation">(</span>GPIO_TypeDef<span class="token operator">*</span> GPIOx<span class="token punctuation">,</span> <span class="token class-name">uint16_t</span> GPIO_Pin<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>函数名</th> <th>HAL_GPIO_TogglePin</th></tr></thead> <tbody><tr><td>函数作用</td> <td>翻转对应引脚的电平</td></tr> <tr><td>返回值</td> <td>void</td></tr> <tr><td>参数 1：GPIOx</td> <td>对应 GPIO 总线，其中 x 可以是 A…I。例如 PH10，则输入 GPIOH</td></tr> <tr><td>参数 2：GPIO_Pin</td> <td>对应引脚数。可以是 0-15。例如 PH10，则输入 GPIO_PIN_10</td></tr></tbody></table> <h3 id="hal-gpio-readpin"><a href="#hal-gpio-readpin" class="header-anchor">#</a> HAL_GPIO_ReadPin</h3> <p>定义如下：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>GPIO_PinState <span class="token function">HAL_GPIO_ReadPin</span><span class="token punctuation">(</span>GPIO_TypeDef<span class="token operator">*</span> GPIOx<span class="token punctuation">,</span> <span class="token class-name">uint16_t</span> GPIO_Pin<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>函数名</th> <th>HAL_GPIO_ReadPin</th></tr></thead> <tbody><tr><td>函数作用</td> <td>返回引脚电平</td></tr> <tr><td>返回值</td> <td>GPIO_PinState，如果是高电平则返回<code>GPIO_PIN_SET</code>（对应为1），如果是低电平则返回<code>GPIO_PIN_RESET</code>（对应为0）</td></tr> <tr><td>参数 1             </td> <td>对应 GPIO 总线，其中 x 可以是 A…I。例如 PH10，则输入 GPIOH</td></tr> <tr><td>参数 2</td> <td>对应引脚数。可以是 0-15。例如 PH10，则输入 GPIO_PIN_10</td></tr></tbody></table> <h2 id="定时器操作"><a href="#定时器操作" class="header-anchor">#</a> 定时器操作</h2> <h3 id="hal-tim-irqhandler"><a href="#hal-tim-irqhandler" class="header-anchor">#</a> HAL_TIM_IRQHandler</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">HAL_TIM_IRQHandler</span><span class="token punctuation">(</span>TIM_HandleTypeDef <span class="token operator">*</span>htim<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>函数名</th> <th>HAL_TIM_IRQHandler</th></tr></thead> <tbody><tr><td>函数作用</td> <td>HAL对涉及（定时器）中断的寄存器进行处理</td></tr> <tr><td>返回值</td> <td>void</td></tr> <tr><td>参数</td> <td><code>*htim</code> 定时器的句柄指针，如定时器1就输入<code>&amp;htim1</code>，定时器2就输入<code>&amp;htim2</code></td></tr></tbody></table> <p>在这个函数对寄存器进行配置之后，程序将会自动调用中断回调函数</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>_weak <span class="token keyword">void</span> <span class="token function">HAL_TIM_PeriodElapsedCallback</span><span class="token punctuation">(</span>TIM_HandleTypeDef <span class="token operator">*</span>htim<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>和上面一样，它的参数也是定时器的句柄指针。我们在<code>main.c</code>中就是需要重新将<strong>中断的内容</strong>写入这个回调函数，定时器中断更多请内容查看<a href="/pages/82e74c/">此处</a></p> <h3 id="hal-tim-base-start"><a href="#hal-tim-base-start" class="header-anchor">#</a> HAL_TIM_Base_Start</h3> <p>如果不开启中断，仅让定时器以定时功能工作，为了使定时器开始工作，需要调用HAL库提供的函数</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>HAL_StatusTypeDef <span class="token function">HAL_TIM_Base_Start</span><span class="token punctuation">(</span>TIM_HandleTypeDef <span class="token operator">*</span>htim<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>函数名</th> <th>HAL_TIM_Base_Start</th></tr></thead> <tbody><tr><td>函数作用</td> <td>使对应的定时器开始工作</td></tr> <tr><td>返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功使定时器开始工作，则返回<code>HAL_OK</code></td></tr> <tr><td>参数</td> <td><code>*htim</code> 定时器的句柄指针，如定时器1就输入<code>&amp;htim1</code>，定时器2就输入<code>&amp;htim2</code></td></tr></tbody></table> <p>此函数需要在主循环<code>while(1)</code>之前调用</p> <h3 id="hal-tim-base-start-it"><a href="#hal-tim-base-start-it" class="header-anchor">#</a> HAL_TIM_Base_Start_IT</h3> <p>接上面的函数，如果不仅需要开启定时器，还需要使用定时中断，则需要调用此函数</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>HAL_StatusTypeDef <span class="token function">HAL_TIM_Base_Start_IT</span><span class="token punctuation">(</span>TIM_HandleTypeDef <span class="token operator">*</span>htim<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th style="text-align:left;">HAL_TIM_Base_Start_IT</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td style="text-align:left;">使对应的定时器开始工作，并使能其定时中断</td></tr> <tr><td style="text-align:left;">返回值</td> <td style="text-align:left;">HAL_StatusTypeDef，HAL库定义的几种状态，如果成功使定时器开始工作，则返回HAL_OK</td></tr> <tr><td style="text-align:left;">参数</td> <td style="text-align:left;"><code>*htim</code> 定时器的句柄指针，如定时器1就输入<code>&amp;htim1</code>，定时器2就输入<code>&amp;htim2</code></td></tr></tbody></table> <p>此函数也需要在主循环<code>while(1)</code>之前调用</p> <h3 id="hal-tim-setcompare"><a href="#hal-tim-setcompare" class="header-anchor">#</a> __HAL_TIM_SetCompare</h3> <p>这是在定时器进行 PWM 输出的时候，对储存比较值的寄存器 TIMx_CCRx 赋值的函数</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">__HAL_TIM_SET_COMPARE</span><span class="token expression"><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">,</span> __CHANNEL__<span class="token punctuation">,</span> __COMPARE__<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__CHANNEL__<span class="token punctuation">)</span> <span class="token operator">==</span> TIM_CHANNEL_1<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>CCR1 <span class="token operator">=</span> <span class="token punctuation">(</span>__COMPARE__<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span></span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>__CHANNEL__<span class="token punctuation">)</span> <span class="token operator">==</span> TIM_CHANNEL_2<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>CCR2 <span class="token operator">=</span> <span class="token punctuation">(</span>__COMPARE__<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span></span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>__CHANNEL__<span class="token punctuation">)</span> <span class="token operator">==</span> TIM_CHANNEL_3<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>CCR3 <span class="token operator">=</span> <span class="token punctuation">(</span>__COMPARE__<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span></span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>CCR4 <span class="token operator">=</span> <span class="token punctuation">(</span>__COMPARE__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>__HAL_TIM_SetCompare</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>在程序运行时对储存比较值的寄存器 TIMx_CCRx 赋值，修改比较值</td></tr> <tr><td style="text-align:left;">参数1</td> <td>输入<code>*htim</code> 定时器的句柄指针即可，如定时器1就输入<code>&amp;htim1</code>，定时器2就输入<code>&amp;htim2</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td>定时器的频道号，如<code>TIM_CHANNEL_1</code>, <code>TIM_CHANNEL_2</code></td></tr> <tr><td style="text-align:left;">参数3</td> <td>要赋给 TIMx_CCRx 寄存器的值，此值要小于 TIMx_ARR 内的重装载值</td></tr></tbody></table> <h3 id="hal-tim-prescaler"><a href="#hal-tim-prescaler" class="header-anchor">#</a> __HAL_TIM_PRESCALER</h3> <p>其实它和 <code>__HAL_TIM_SET_PRESCALER</code>是等效的，因为此句：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__HAL_TIM_PRESCALER</span>    <span class="token expression">__HAL_TIM_SET_PRESCALER</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但其原始定义为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">__HAL_TIM_SET_PRESCALER</span><span class="token expression"><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">,</span> __PRESC__<span class="token punctuation">)</span>       <span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>PSC <span class="token operator">=</span> <span class="token punctuation">(</span>__PRESC__<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>__HAL_TIM_PRESCALER</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>在程序运行时对储存预分频比的寄存器 TIMx_PSR 赋值，修改预分频比</td></tr> <tr><td style="text-align:left;">参数1</td> <td>输入<code>*htim</code> 定时器的句柄指针即可，如定时器1就输入<code>&amp;htim1</code>，定时器2就输入<code>&amp;htim2</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td>要赋给 TIMx_PSR 寄存器的新预分频比值</td></tr></tbody></table> <h3 id="hal-tim-pwm-start"><a href="#hal-tim-pwm-start" class="header-anchor">#</a> HAL_TIM_PWM_Start</h3> <p>HAL库提供的PWM初始化函数，为定时器初始化 PWM</p> <table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_TIM_PWM_Start</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>使对应定时器的对应通道开始PWM输出</td></tr> <tr><td style="text-align:left;">返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功使定时器开始工作，则返回<code>HAL_OK</code></td></tr> <tr><td style="text-align:left;">参数1</td> <td><code>*htim</code>定时器的句柄指针，如定时器1就输入<code>&amp;htim1</code>，定时器2就输入<code>&amp;htim2</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td>Channel 定时器PWM输出的通道，比如通道1为<code>TIM_CHANNEL1</code></td></tr></tbody></table> <h2 id="adc-操作"><a href="#adc-操作" class="header-anchor">#</a> ADC 操作</h2> <h3 id="hal-adc-configchannel"><a href="#hal-adc-configchannel" class="header-anchor">#</a> HAL_ADC_ConfigChannel</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>HAL_StatusTypeDef <span class="token function">HAL_ADC_ConfigChannel</span><span class="token punctuation">(</span>ADC_HandleTypeDef<span class="token operator">*</span> hadc<span class="token punctuation">,</span> ADC_ChannelConfTypeDef<span class="token operator">*</span> sConfig<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_ADC_ConfigChannel</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>设置ADC通道的各个属性值，包括转换通道，序列排序，采样时间等</td></tr> <tr><td style="text-align:left;">返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功使ADC开始工作，则返回<code>HAL_OK</code></td></tr> <tr><td style="text-align:left;">参数1</td> <td>TIM_HandleTypeDef * hadc即ADC的句柄指针，如果是adc1就输入<code>&amp;hadc1</code>，adc2就输入<code>&amp;hadc2</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td>ADC_ChannelConfTypeDef* sConfig 即指向ADC设置的结构体指针。我们先对<code>sConfig</code>结构体进行赋值，然后再将其指针作为参数输入函数</td></tr></tbody></table> <p>这个函数非常关键，直接指明了接下来对 ADC 操作的一些详细参数，包括端口号等，所以在改变 ADC 读取数据的配置时一定要记得改一下此函数的参数，其使用例见<a href="https://github.com/RoboMaster/Development-Board-C-Examples/blob/master/7.ADC_24V_power/bsp/boards/bsp_adc.c" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="hal-adc-start"><a href="#hal-adc-start" class="header-anchor">#</a> HAL_ADC_Start</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>HAL_StatusTypeDef <span class="token function">HAL_ADC_Start</span><span class="token punctuation">(</span>ADC_HandleTypeDef<span class="token operator">*</span> hadc<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_ADC_Start</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>开启ADC的采样</td></tr> <tr><td style="text-align:left;">返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功使ADC开始工作，则返回<code>HAL_OK</code></td></tr> <tr><td style="text-align:left;">参数1</td> <td>TIM_HandleTypeDef * hadc即ADC的句柄指针，如果是adc1就输入<code>&amp;hadc1</code>，adc2就输入<code>&amp;hadc2</code></td></tr></tbody></table> <h3 id="hal-adc-pollforconversion"><a href="#hal-adc-pollforconversion" class="header-anchor">#</a> HAL_ADC_PollForConversion</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>HAL_StatusTypeDef <span class="token function">HAL_ADC_PollForConversion</span><span class="token punctuation">(</span>ADC_HandleTypeDef<span class="token operator">*</span> hadc<span class="token punctuation">,</span> <span class="token class-name">uint32_t</span> Timeout<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_ADC_PollForConversion</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>等待ADC转换结束</td></tr> <tr><td style="text-align:left;">返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功使ADC开始工作，则返回<code>HAL_OK</code></td></tr> <tr><td style="text-align:left;">参数1</td> <td>TIM_HandleTypeDef * hadc即ADC的句柄指针，如果是adc1就输入<code>&amp;hadc1</code>，adc2就输入<code>&amp;hadc2</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td>uint32_t Timeout等待的最大时间</td></tr></tbody></table> <h3 id="hal-adc-getvalue"><a href="#hal-adc-getvalue" class="header-anchor">#</a> HAL_ADC_GetValue</h3> <table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_ADC_GetValue</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>获取ADC值</td></tr> <tr><td style="text-align:left;">返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功使ADC开始工作，则返回<code>HAL_OK</code></td></tr> <tr><td style="text-align:left;">参数1</td> <td>TIM_HandleTypeDef * hadc即ADC的句柄指针，如果是adc1就输入<code>&amp;hadc1</code>，adc2就输入<code>&amp;hadc2</code></td></tr></tbody></table> <h2 id="串口操作"><a href="#串口操作" class="header-anchor">#</a> 串口操作</h2> <h3 id="hal-uart-transmit"><a href="#hal-uart-transmit" class="header-anchor">#</a> HAL_UART_Transmit</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>HAL_StatusTypeDef <span class="token function">HAL_UART_Transmit</span><span class="token punctuation">(</span>UART_HandleTypeDef <span class="token operator">*</span>huart<span class="token punctuation">,</span> <span class="token class-name">uint8_t</span> <span class="token operator">*</span>pData<span class="token punctuation">,</span> <span class="token class-name">uint16_t</span> Size<span class="token punctuation">,</span> <span class="token class-name">uint32_t</span> Timeout<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_UART_Transmit</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>从指定的串口发送一段数据</td></tr> <tr><td style="text-align:left;">返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功发送本次数据，则返回<code>HAL_OK</code></td></tr> <tr><td style="text-align:left;">参数1</td> <td>UART_HandleTypeDef *huart 要进行发送的串口的句柄指针，如串口1就输入<code>&amp;huart1</code>，串口2就输入<code>&amp;huart2</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td>uint8_t *pData 要发送的数据的首地址，比如要发送<code>buf[]=”Helloword”</code>则输入<code>buf</code>，也可以直接输入要发送的字符串</td></tr> <tr><td style="text-align:left;">参数3</td> <td>uint16_t Size 要发送的数据的大小，即输入的字符串的长度，也可以通过<code>sizeof</code>关键字获取数据大小</td></tr> <tr><td style="text-align:left;">参数4</td> <td>uint32_t Timeout 发送超时时间，如果发送时间超出该时间则取消本次发送</td></tr></tbody></table> <h3 id="hal-uart-receive-it"><a href="#hal-uart-receive-it" class="header-anchor">#</a> HAL_UART_Receive_IT</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>HAL_StatusTypeDef <span class="token function">HAL_UART_Receive_IT</span><span class="token punctuation">(</span>UART_HandleTypeDef <span class="token operator">*</span>huart<span class="token punctuation">,</span> <span class="token class-name">uint8_t</span> <span class="token operator">*</span>pData<span class="token punctuation">,</span> <span class="token class-name">uint16_t</span> Size<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_UART_Receive_IT</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>使能一个串口的接收中断</td></tr> <tr><td style="text-align:left;">返回值</td> <td>HAL_StatusTypeDef，HAL库定义的几种状态，如果成功发送本次数据，则返回<code>HAL_OK</code></td></tr> <tr><td style="text-align:left;">参数1</td> <td>UART_HandleTypeDef *huart 要进行发送的串口的句柄指针，如串口1就输入<code>&amp;huart1</code>，串口2就输入<code>&amp;huart2</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td>uint8_t *pData 要接收本次数据的缓冲变量的地址</td></tr> <tr><td style="text-align:left;">参数3</td> <td>uint16_t Size 要接收的数据的大小，即输入的字符串的长度，只有收够这个长度的数据才会进入中断</td></tr></tbody></table> <p>这个函数需要注意的是，它才触发一次中断后会将中断标志位清除，所以需要重复调用才能持续接收</p> <h3 id="hal-uart-enable-it"><a href="#hal-uart-enable-it" class="header-anchor">#</a> __HAL_UART_ENABLE_IT</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">__HAL_UART_ENABLE_IT</span><span class="token expression"><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">,</span> __INTERRUPT__<span class="token punctuation">)</span>   <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__INTERRUPT__<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">28U</span><span class="token punctuation">)</span> <span class="token operator">==</span> UART_CR1_REG_INDEX<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>CR1 <span class="token operator">|=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__INTERRUPT__<span class="token punctuation">)</span> <span class="token operator">&amp;</span> UART_IT_MASK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span> </span><span class="token punctuation">\</span>
                                                           <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__INTERRUPT__<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">28U</span><span class="token punctuation">)</span> <span class="token operator">==</span> UART_CR2_REG_INDEX<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>CR2 <span class="token operator">|=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__INTERRUPT__<span class="token punctuation">)</span> <span class="token operator">&amp;</span> UART_IT_MASK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span> </span><span class="token punctuation">\</span>
                                                           <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>CR3 <span class="token operator">|=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>__INTERRUPT__<span class="token punctuation">)</span> <span class="token operator">&amp;</span> UART_IT_MASK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><table><thead><tr><th style="text-align:left;">宏名</th> <th>__HAL_UART_ENABLE_IT</th></tr></thead> <tbody><tr><td style="text-align:left;">宏作用</td> <td>使能某个串口中断类型</td></tr> <tr><td style="text-align:left;">参数1</td> <td><code>__HANDLE__</code>要进行使能的串口的句柄指针，如串口1就输入<code>&amp;huart1</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td><code>__INTERRUPT__</code>要使能的中断类型，<code>UART_IT_RXNE</code>接收中断，<code>UART_IT_IDLE</code>空闲中断</td></tr></tbody></table> <h3 id="hal-uart-get-flag"><a href="#hal-uart-get-flag" class="header-anchor">#</a> __HAL_UART_GET_FLAG</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">__HAL_UART_GET_FLAG</span><span class="token expression"><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">,</span> __FLAG__<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__HANDLE__<span class="token punctuation">)</span><span class="token operator">-&gt;</span>Instance<span class="token operator">-&gt;</span>SR <span class="token operator">&amp;</span> <span class="token punctuation">(</span>__FLAG__<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span>__FLAG__<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">宏名</th> <th>__HAL_UART_GET_FLAG</th></tr></thead> <tbody><tr><td style="text-align:left;">宏作用</td> <td>测试某个串口的某个 FLAG 位的状态</td></tr> <tr><td style="text-align:left;">返回值</td> <td>FLAG 的两种状态：SET 与 RESET</td></tr> <tr><td style="text-align:left;">参数1</td> <td><code>__HANDLE__</code>要进行测试的串口的句柄指针，如串口1就输入<code>&amp;huart1</code></td></tr> <tr><td style="text-align:left;">参数2</td> <td><code>__FLAG__</code>是要测试的 FLAG 名称，空闲中断位是<code>UART_FLAG_IDLE</code>，基本为这个格式</td></tr></tbody></table> <h3 id="hal-uart-clear-idleflag"><a href="#hal-uart-clear-idleflag" class="header-anchor">#</a> __HAL_UART_CLEAR_IDLEFLAG</h3> <table><thead><tr><th style="text-align:left;">宏名</th> <th>__HAL_UART_GET_FLAG</th></tr></thead> <tbody><tr><td style="text-align:left;">宏作用</td> <td>清除<code>IDLE</code>的中断标志位的宏定义</td></tr> <tr><td style="text-align:left;">参数1</td> <td><code>__HANDLE__</code>要删除标志位的串口的句柄指针，如串口1就输入<code>&amp;huart1</code></td></tr></tbody></table> <h2 id="中断返回函数"><a href="#中断返回函数" class="header-anchor">#</a> 中断返回函数</h2> <h3 id="hal-tim-periodelapsedcallback"><a href="#hal-tim-periodelapsedcallback" class="header-anchor">#</a> HAL_TIM_PeriodElapsedCallback</h3> <p>这是定时器中断的回调函数，其原始定义为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>__weak <span class="token keyword">void</span> <span class="token function">HAL_TIM_PeriodElapsedCallback</span><span class="token punctuation">(</span>TIM_HandleTypeDef <span class="token operator">*</span>htim<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们需要在<code>main.c</code>或其他我们自己的位置重新定义其内容</p> <table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_TIM_PeriodElapsedCallback</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>定义定时器中断的中断执行内容</td></tr> <tr><td style="text-align:left;">返回值</td> <td>void</td></tr> <tr><td style="text-align:left;">参数1</td> <td>发生定时器中断的定时器句柄指针，是由系统在调用时自动填写的；如 <code>&amp;htim1</code>, <code>&amp;htim2</code> 等</td></tr></tbody></table> <h3 id="hal-gpio-exit-callback"><a href="#hal-gpio-exit-callback" class="header-anchor">#</a> HAL_GPIO_EXIT_Callback</h3> <p>这是 GPIO 外部中断的回调函数，其原始定义为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>__weak <span class="token keyword">void</span> <span class="token function">HAL_GPIO_EXTI_Callback</span><span class="token punctuation">(</span><span class="token class-name">uint16_t</span> GPIO_Pin<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们需要在<code>main.c</code>或其他我们自己的位置重新定义其内容</p> <table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_GPIO_EXIT_Ballback</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>定义 GPIO 外部中断的中断执行内容</td></tr> <tr><td style="text-align:left;">返回值</td> <td>void</td></tr> <tr><td style="text-align:left;">参数1</td> <td>发生外部中断的引脚(组)号，是由系统在调用时自动填写的；如 PA0, PB1 等</td></tr></tbody></table> <h3 id="hal-uart-rxcpltcallback"><a href="#hal-uart-rxcpltcallback" class="header-anchor">#</a> HAL_UART_RxCpltCallback</h3> <p>这是 UART 接收中断的回调函数，其原始定义为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>__weak <span class="token keyword">void</span> <span class="token function">HAL_UART_RxCpltCallback</span><span class="token punctuation">(</span>UART_HandleTypeDef <span class="token operator">*</span>huart<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:left;">函数名</th> <th>HAL_UART_RxCpltCallback</th></tr></thead> <tbody><tr><td style="text-align:left;">函数作用</td> <td>定义 UART 接收中断的内容</td></tr> <tr><td style="text-align:left;">返回值</td> <td>void</td></tr> <tr><td style="text-align:left;">参数1</td> <td>发生接收中断的串口句柄指针，是由系统在调用时自动填写的；如 <code>&amp;huart1</code> 等</td></tr></tbody></table></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/chanshu0508/wikiBase/edit/master/docs/STM32/05.HAL库外设/00.HAL库函数.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/11/18, 13:11:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/6abdf5/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">GPIO位带操作</div></a> <a href="/pages/86f153/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">HAL结构</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/6abdf5/" class="prev">GPIO位带操作</a></span> <span class="next"><a href="/pages/86f153/">HAL结构</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>Jack :) | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.287ba006.js" defer></script><script src="/assets/js/2.cf4362eb.js" defer></script><script src="/assets/js/48.afbe4f62.js" defer></script>
  </body>
</html>