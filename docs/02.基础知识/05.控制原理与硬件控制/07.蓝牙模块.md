---
title: 蓝牙模块
date: 2020-11-10 18:36:19
permalink: /pages/01c629/
---
# 蓝牙模块

简单记一下 HC-05 蓝牙模块的基础使用和今天调试遇到的坑

## 初始化

### 接线

一般简单的方式我们使用直接连接电脑（使用USB-TTL）的方式进行初始化，接线就是：

```text
    HC-05        USB
   | TX |   ->   | RX |
   | RX |   ->   | TX |
   | VCC |   ->   | VCC |
   | GND |   ->   | GND |
```

### AT模式

在上电之前按住按钮，上电之后自动进入指令控制模式

> HC-05 模块有两种工作模式：命令响应工作模式以及自动连接工作模式
>
> * 在命令响应工作模式（也叫 AT 模式）我们可以通过 AT 指令来设置一些蓝牙模块的工作设置，例如工作波特率、蓝牙信号名称、蓝牙连接密码等等
> * 自动连接工作模式下就是正常的接受与发送数据，但在这个模式下又可以分为主（Master），从（Slave）以及回环（Loop）模式
>   * 主模式下，模块可以主动搜索并连接其它蓝牙模块并接收发送数据
>   * 从模式下，只能被搜索被其它蓝牙模块连接进行接收发送数据
>   * 回环模式下，蓝牙模块就是将接收的数据原样返回给远程的主设备

连接之后，必须将波特率设为 **38400**，这是 AT 模式的固定波特率。随后就可以进行使用 AT 指令的控制，需要注意的是每条 AT 指令都必须以回车结束

下面是常用的几个 AT 指令：

```text
AT+ROLE=0              // 0表示主模式,1表示从模式,2表示回环模式
AT+NAME="BLUENAME"     // 配置蓝牙模块名称，也可以不打引号，返回OK
AT+PSWD=1234           // 设置蓝牙配对码
AT+UART=115200,1,0     // 设置蓝牙
AT+RESET               // 重启模块,可以看到LED等以0.5s间隔闪烁
```

发送完指令只要接收到 HC-05 反馈回的信号 `OK` 即可

### 自动连接工作模式

在自动工作模式下就可以发送接受信息了

需要注意的就是，有的串口调试器/上位机发送的数据是本身就有格式的（比如实验室的上位机），所以你要考虑。

但是传输数据一般也用不到电脑上的上位机发送数据，我们会使用手机上的串口工具将信号传输给单片机，经过处理判断状态！
